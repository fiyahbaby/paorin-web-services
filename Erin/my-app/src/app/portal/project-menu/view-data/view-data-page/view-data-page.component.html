<app-navbar></app-navbar>
<div id="view-data-page">
    <app-header formHeader="View Data Page" formSubHeader="Project Menu > View Data > View Data Page"></app-header>
    <p-card class="w-12 h-full card-header" id="project-p-card">
        <div class="w-full">
            <p-header>
                <h1 class="w-full mt-0 mb-3 text-black-alpha-90" style="font-size: 18px">
                    Test Summary
                </h1>
            </p-header>
            <div class="mb-5 flex justify-content-evenly ">
                <div class="doughnut-chart-container">
                    <canvas #chartCanvas></canvas>
                </div>
                <div class="chart-container w-6">
                    <canvas #lineChartCanvas></canvas>
                </div>
            </div>
        </div>

        <div class="w-full flex flex-column">
            <div class="w-full mb-3">
                <p-header>
                    <h1 class="mt-0 mb-3 text-black-alpha-90" style="font-size: 18px">
                        Test Results
                    </h1>
                </p-header>
                <p-table [paginator]="true" [rows]="10" [showCurrentPageReport]="true"
                    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries" class="paramTable"
                    [value]="buildData" styleClass="p-datatable-striped p-datatable-gridlines"
                    (sortChange)="sortNumericColumn($event)">
                    <ng-template pTemplate="header">
                        <tr>
                            <th style="text-align: center" *ngFor="let key of testResults" [pSortableColumn]="key">
                                {{ key }}
                            </th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-dataItem>
                        <tr>
                            <td *ngFor="let key of testResults"
                                [ngStyle]="{ 'text-align': key === 'Test Name' ? 'left' : 'center' }">
                                {{ dataItem[key] }}
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>

            <div class="w-full">
                <p-header>
                    <h1 class="mt-0 mb-3 text-black-alpha-90" style="font-size: 18px">
                        Test Parameters
                    </h1>
                </p-header>
                <p-table class="paramTable" [value]="testParam" styleClass="p-datatable-striped p-datatable-gridlines">
                    <ng-template pTemplate="header">
                        <tr>
                            <th style="width: 0%; text-align: center">Parameter</th>
                            <th style="width: 40rem; text-align: Left">Description</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-testParam>
                        <tr>
                            <td style="text-align: center">{{ testParam }}</td>
                            <td style="text-align: left">{{ refParam[testParam] }}</td>
                        </tr>
                    </ng-template>
                </p-table>

                <div class="flex justify-content-end buttons-container bottom mt-3">
                    <ng-container *ngTemplateOutlet="buttons"></ng-container>
                </div>
            </div>
        </div>
    </p-card>
</div>

<ng-template #buttons>
    <p-button label="Back" styleClass="p-button-danger" type="button" (onClick)="onBack()"></p-button>
    <!-- <p-button label="Submit" styleClass="p-button-success" type="submit" (onClick)="onSubmit()"></p-button> -->
</ng-template>